<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>#SammuKiSimmu ‚Äî Sanyam ‚ù§Ô∏è Simran</title>
<style>
:root{
  --bg:#fff7f0; --accent:#b44a2e; --gold:#d4a24a; --ivory:#fff8f0; --muted:#6b5b4a;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial}
body{background:linear-gradient(180deg,var(--ivory),#fff);color:#3b2b2b;overflow:hidden}
.container{width:100%;height:100%;position:relative}
/* Intro overlay */
.intro{position:absolute;inset:0;background:linear-gradient(135deg, #fff4e6 0%, #ffeef0 50%);display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:50}
.scene{position:relative;width:90%;max-width:980px;height:220px;overflow:visible}
.ground{position:absolute;left:0;right:0;bottom:10px;height:60px;background:linear-gradient(90deg,#f6e7d9,#eadcc9);border-radius:30px}
.baraat{position:absolute;bottom:40px;left:-20%;display:flex;gap:12px;align-items:flex-end}
.horse{width:96px;height:64px;border-radius:8px;background:linear-gradient(180deg,#6b3b1a,#8a4c2a);position:relative;transform-origin:center}
.horse:before{content:'';position:absolute;left:6px;top:-18px;width:34px;height:34px;border-radius:50%;background:#f8d6b3}
.rider{position:absolute;left:36px;top:-10px;width:28px;height:28px;border-radius:50%;background:#ffd9b3;border:3px solid #9b6b4b}
.sehra{position:absolute;left:12px;top:-6px;width:40px;height:8px;border-radius:4px;background:linear-gradient(90deg,#ffd6b3,#ffb277)}
.dhol{width:36px;height:36px;background:linear-gradient(180deg,#ffcf9a,#f0a76a);border-radius:50%;box-shadow:inset 0 -6px 0 rgba(0,0,0,.08)}
.confetti{position:absolute;inset:0;pointer-events:none}
.confetti span{position:absolute;width:8px;height:12px;opacity:0;transform:translateY(-10px) rotate(20deg)}
.title{margin-top:18px;text-align:center}
.title h1{font-size:28px;margin:0;color:var(--accent);letter-spacing:1px}
.title p{margin:6px 0 0;color:var(--muted)}
.enter-btn{margin-top:18px;padding:10px 18px;border-radius:999px;background:var(--accent);color:white;border:none;cursor:pointer;font-weight:700}
/* Main slides */
.slides{position:absolute;inset:0;padding:40px;display:flex;align-items:center;justify-content:center;z-index:10}
.deck{width:100%;max-width:1100px;background:rgba(255,255,255,.86);backdrop-filter:blur(6px);border-radius:16px;padding:24px;box-shadow:0 8px 30px rgba(30,10,10,.12)}
.row{display:flex;gap:20px;align-items:flex-start;flex-wrap:wrap}
.left{flex:1 1 320px}
.right{width:320px}
.event-card{background:linear-gradient(180deg,#fff,#fff3eb);padding:18px;border-radius:12px;border:1px solid #f0ded0}
.event-card h2{margin:0 0 8px;color:var(--accent)}
.small{font-size:14px;color:var(--muted)}
.map-link{display:inline-block;margin-top:10px;padding:8px 12px;border-radius:8px;background:var(--gold);color:#4b2e15;text-decoration:none;font-weight:600}
.controls{display:flex;gap:8px;align-items:center;margin-top:12px}
.icon-btn{padding:10px;border-radius:10px;border:1px solid #e6d7c6;background:white;cursor:pointer}
.pagination{display:flex;gap:6px;margin-top:10px}
.dot{width:10px;height:10px;border-radius:50%;background:#e6d0bf}
.dot.active{background:var(--accent)}
.footer{display:flex;justify-content:space-between;align-items:center;margin-top:18px}
.hash{font-weight:700;color:var(--muted)}
.addcal{padding:8px 12px;background:#fff;border:1px solid #e5d6c5;border-radius:10px;cursor:pointer}
/* Responsive */
@media(max-width:720px){.slides{padding:18px}.right{width:100%}.deck{padding:16px}}
/* simple animations */
@keyframes ride{0%{transform:translateX(-20vw)}100%{transform:translateX(120vw)}}
.baraat.move{animation:ride 4.5s linear forwards}
@keyframes conf{0%{opacity:1;transform:translateY(-30px) rotate(0deg)}100%{opacity:0;transform:translateY(120px) rotate(200deg)}}
.confetti span.c1{background:#ff6b6b;animation:conf 1.4s linear both}
.confetti span.c2{background:#ffd166;animation:conf 1.6s linear .1s both}
.confetti span.c3{background:#6bcB77;animation:conf 1.5s linear .2s both}
.hidden{display:none}
/* small interactive styles */
.next-hint{margin-top:8px;font-size:13px;color:#7a5b4a}
</style>
</head>
<body>
<div class="container">
  <div class="intro" id="intro">
    <div class="scene">
      <div class="ground"></div>
      <div class="baraat" id="baraat">
        <div class="dhol"></div>
        <div class="horse" id="horse">
          <div class="sehra"></div>
          <div class="rider" title="Sanyam"></div>
        </div>
        <div class="dhol"></div>
      </div>
      <div class="confetti" id="confetti"></div>
    </div>
    <div class="title">
      <h1>#SammuKiSimmu</h1>
      <p>Join the celebration ‚Äî Sanyam <span style="color:#b44a2e">‚ù§</span> Simran</p>
    </div>
    <button class="enter-btn" id="enterBtn">Enter the Celebration</button>
    <p class="small" style="margin-top:8px">(Tap or click the horse for extra confetti üéâ)</p>
  </div>

  <div class="slides hidden" id="slides">
    <div class="deck">
      <div class="row">
        <div class="left">
          <div class="event-card" id="slideContent">
            <!-- dynamic content inserted here -->
          </div>
          <div class="controls">
            <button class="icon-btn" id="prevBtn">‚óÄ Prev</button>
            <button class="icon-btn" id="nextBtn">Next ‚ñ∂</button>
            <button class="icon-btn" id="playPause">‚ñ∂Ô∏è Play</button>
            <div style="flex:1"></div>
            <button class="addcal" id="downloadAll">Download ICS</button>
          </div>
          <div class="pagination" id="pagination"></div>
          <div class="next-hint">You can also swipe or use arrow keys ‚Üî</div>
        </div>
        <div class="right">
          <div class="event-card">
            <h3>Details</h3>
            <p class="small" id="detailText"></p>
            <a class="map-link" target="_blank" id="mapLink">Open in Google Maps</a>
            <div style="margin-top:12px">
              <button class="icon-btn" id="musicToggle">üîà Music</button>
            </div>
          </div>
          <div class="event-card" style="margin-top:12px">
            <h3>Hashtag</h3>
            <p class="hash">#sammuKiSimmu</p>
            <p class="small">Share your moments with our hashtag!</p>
          </div>
        </div>
      </div>
    <div class="footer">
      <div class="small">Made with ‚ù§Ô∏è ‚Äî Sanyam & Simran</div>
      <div class="small">Open this invite on mobile for best experience</div>
    </div>
    </div>
  </div>

  <!-- audio (user triggers) -->
  <audio id="bgAudio" loop preload="auto">
    <source src="data:audio/mpeg;base64,//uQZAAAAAAAAAAAAAAAAAAAAAA..." type="audio/mpeg">
  </audio>
</div>

<script>
// --- Data for events ---
const EVENTS = [
  {
    id:'welcome',
    title:'Welcome to #SammuKiSimmu',
    subtitle:'Sanyam ‚ù§Ô∏è Simran',
    body:'You are cordially invited to celebrate our wedding. Enjoy the events below. Click Next or sit back and watch the story unfold.',
    map: 'https://www.google.com/maps/search/Celebrations+Inn+Resort+Fazilka',
    when: '',
  },
  {
    id:'haldi',
    title:'Haldi Ceremony',
    subtitle:'Haldi ‚Äî 5th December 2025, 3:00 PM',
    body:'Join us for the Haldi ceremony at Aggarwal Dharamshala, Fazilka. Pink clothes encouraged & lots of fun!',
    map: 'https://www.google.com/maps/search/Aggarwal+Dharamshala+Fazilka',
    when: '2025-12-05T15:00:00'
  },
  {
    id:'sangeet',
    title:'Sangeet Night',
    subtitle:'5th December 2025, 8:00 PM onwards',
    body:'Dance, music and celebration ‚Äî Sangeet at Aggarwal Dharamshala. Get your moves ready!',
    map: 'https://www.google.com/maps/search/Aggarwal+Dharamshala+Fazilka',
    when: '2025-12-05T20:00:00'
  },
  {
    id:'wedding',
    title:'Wedding Night',
    subtitle:'6th December 2025, 8:00 PM onwards',
    body:'Witness the union of Sanyam and Simran at Celebrations Inn Resort, Fazilka. Reception to follow.',
    map: 'https://www.google.com/maps/search/Celebrations+Inn+Resort+Fazilka',
    when: '2025-12-06T20:00:00'
  },
  {
    id:'thanks',
    title:'See You There!',
    subtitle:'#sammuKiSimmu',
    body:'Thank you for being part of our story. Can\'t wait to celebrate together!',
    map: 'https://www.google.com/maps/search/Fazilka',
    when: ''
  }
];

// --- Elements ---
const intro = document.getElementById('intro');
const baraat = document.getElementById('baraat');
const horse = document.getElementById('horse');
const confetti = document.getElementById('confetti');
const enterBtn = document.getElementById('enterBtn');
const slides = document.getElementById('slides');
const slideContent = document.getElementById('slideContent');
const detailText = document.getElementById('detailText');
const mapLink = document.getElementById('mapLink');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const pagination = document.getElementById('pagination');
const playPause = document.getElementById('playPause');
const musicToggle = document.getElementById('musicToggle');
const bgAudio = document.getElementById('bgAudio');
const downloadAll = document.getElementById('downloadAll');

let idx = 0; let playing = true; let autoTimer = null;

// create confetti nodes
function createConfetti(){
  confetti.innerHTML='';
  for(let i=0;i<18;i++){
    const s=document.createElement('span');
    s.className='c'+(i%3+1);
    s.style.left=(10+Math.random()*80)+'%';
    s.style.top=(10+Math.random()*60)+'%';
    s.style.transform='rotate('+Math.random()*360+'deg)';
    s.style.animationDelay=(Math.random()*0.8)+'s';
    confetti.appendChild(s);
  }
}
createConfetti();

// intro interactions
horse.addEventListener('click', ()=>{ // extra confetti
  createConfetti();
  confetti.style.opacity=1;
  setTimeout(()=>confetti.style.opacity=0,1200);
});

enterBtn.addEventListener('click', startShow);

function startShow(){
  // start baraat animation then show slides
  baraat.classList.add('move');
  createConfetti();
  setTimeout(()=>{ intro.classList.add('hidden'); slides.classList.remove('hidden'); initSlides(); playAudioOnUser(); },4500);
}

// keyboard controls
window.addEventListener('keydown', (e)=>{
  if(slides.classList.contains('hidden')) return;
  if(e.key==='ArrowRight') next();
  if(e.key==='ArrowLeft') prev();
});

// slides rendering
function render(idxLocal){
  const ev = EVENTS[idxLocal];
  slideContent.innerHTML = `
    <h2>${ev.title}</h2>
    <p class="small">${ev.subtitle}</p>
    <hr style="border:none;border-top:1px solid #f0ddd0;margin:12px 0" />
    <p class="small">${ev.body}</p>
    <div style="margin-top:12px">
      <button class="map-link" onclick="window.open('${ev.map}','_blank')">Open Map</button>
      <button class="addcal" style="margin-left:8px" onclick="downloadICS(${idxLocal})">Add to calendar</button>
    </div>
  `;
  detailText.textContent = ev.body;
  mapLink.href = ev.map;
  updatePagination(idxLocal);
}

function updatePagination(active){
  pagination.innerHTML='';
  EVENTS.forEach((e,i)=>{
    const d=document.createElement('div'); d.className='dot'+(i===active?' active':''); pagination.appendChild(d);
  });
}

function next(){ idx=(idx+1)%EVENTS.length; render(idx); }
function prev(){ idx=(idx-1+EVENTS.length)%EVENTS.length; render(idx); }

nextBtn.addEventListener('click', ()=>{ pauseAuto(); next(); });
prevBtn.addEventListener('click', ()=>{ pauseAuto(); prev(); });

// autoplay behavior
function startAuto(){ stopAuto(); playPause.textContent='‚è∏Ô∏è Pause'; playing=true; autoTimer=setInterval(()=>{ next(); },6500); }
function stopAuto(){ if(autoTimer) clearInterval(autoTimer); autoTimer=null; playing=false; playPause.textContent='‚ñ∂Ô∏è Play'; }
function pauseAuto(){ stopAuto(); }
playPause.addEventListener('click', ()=>{ if(autoTimer) stopAuto(); else startAuto(); });

// initialize slides
function initSlides(){ render(0); startAuto(); }

// audio controls
function playAudioOnUser(){ try{ bgAudio.currentTime=0; bgAudio.play().catch(()=>{}); musicToggle.textContent='üîä Music'; }catch(e){}
}
musicToggle.addEventListener('click', ()=>{
  if(bgAudio.paused){ bgAudio.play(); musicToggle.textContent='üîä Music'; } else { bgAudio.pause(); musicToggle.textContent='üîà Music'; }
});

// ICS generation
function createICS(event){
  if(!event.when) return null;
  const dtStart = new Date(event.when);
  const dtEnd = new Date(dtStart.getTime()+2*60*60*1000); // +2 hours
  function fmt(d){ return d.toISOString().replace(/[-:]/g,'').split('.')[0]+'Z'; }
  const ics = [
    'BEGIN:VCALENDAR',
    'VERSION:2.0',
    'PRODID:-//SammuKiSimmu//EN',
    'BEGIN:VEVENT',
    'UID:'+Math.random().toString(36).substr(2,9)+'@sammukisimmu',
    'DTSTAMP:'+fmt(new Date()),
    'DTSTART:'+fmt(dtStart),
    'DTEND:'+fmt(dtEnd),
    'SUMMARY:'+event.title,
    'DESCRIPTION:'+event.body.replace(/\n/g,' '),
    'LOCATION:'+event.map,
    'END:VEVENT',
    'END:VCALENDAR'
  ].join('\r\n');
  return ics;
}

function downloadICS(i){
  const ics = createICS(EVENTS[i]);
  if(!ics){ alert('This event has no fixed time to add to calendar.'); return; }
  const blob = new Blob([ics],{type:'text/calendar;charset=utf-8'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href=url; a.download = EVENTS[i].id+'.ics'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
}

// Download all
downloadAll.addEventListener('click', ()=>{
  // create one zip-like single ics per event by prompting downloads sequentially
  EVENTS.forEach((e,ii)=>{ if(e.when){ setTimeout(()=>downloadICS(ii), ii*300); }});
});

// small swipe support for mobile
let startX=null;
window.addEventListener('touchstart', (e)=>{ if(slides.classList.contains('hidden')) return; startX=e.touches[0].clientX; });
window.addEventListener('touchend', (e)=>{ if(startX===null) return; const endX=e.changedTouches[0].clientX; if(endX-startX>40) { pauseAuto(); prev(); } else if(startX-endX>40) { pauseAuto(); next(); } startX=null; });

// expose downloadICS to inline onclick
window.downloadICS = downloadICS;

// Auto-start intro if user presses Enter
window.addEventListener('keyup', (e)=>{ if(e.key==='Enter' && !intro.classList.contains('hidden')) startShow(); });

// small accessibility: focus enter button
enterBtn.focus();

// Final note: create a tiny inline audio sample if you want to swap with real file.
// The <audio> src contains a placeholder base64 stub ‚Äî replace with real audio by setting bgAudio.src

</script>
</body>
</html>
